<div class="tw-max-w-4xl tw-mx-auto tw-font-[sans-serif] tw-p-6">
  <div class="tw-text-center tw-mb-16">
    <a href="javascript:void(0)">
      <img src="assets/Logo.png" alt="logo" class='tw-w-52 tw-inline-block' />
    </a>
    <h4 class="tw-text-gray-800 tw-text-base tw-font-semibold tw-mt-6">Sign up into your account</h4>
  </div>

  <form [formGroup]="registroForm" (ngSubmit)="onSubmit()">
    <!-- Mostrar alerta de error general si existe -->
    <div *ngIf="errorMessage" class="alert alert-error">
      {{ errorMessage }}
    </div>

    <div class="tw-grid sm:tw-grid-cols-2 tw-gap-8">
      <div>
        <label for="nombre" class="tw-text-gray-800 tw-text-sm tw-mb-2 tw-block">Nombre</label>
        <input id="nombre" name="name" type="text" formControlName="Nombre" class="tw-bg-gray-100 tw-w-full tw-text-gray-800 tw-text-sm tw-px-4 tw-py-3.5 tw-rounded-md focus:tw-bg-transparent tw-outline-blue-500 tw-transition-all" placeholder="Enter name" />
        <div *ngIf="registroForm.get('Nombre')?.invalid && (registroForm.get('Nombre')?.touched || registroForm.get('Nombre')?.dirty)" class="tw-text-red-500 tw-text-sm">
          <div *ngIf="registroForm.get('Nombre')?.errors?.['required']">El nombre es obligatorio.</div>
          <div *ngIf="registroForm.get('Nombre')?.errors?.['minlength']">El nombre tiene que tener al menos 2 letras.</div>
        </div>
      </div>
      <div>
        <label for="Apellido" class="tw-text-gray-800 tw-text-sm tw-mb-2 tw-block">Apellido</label>
        <input id="Apellido" name="lname" type="text" formControlName="Apellido" class="tw-bg-gray-100 tw-w-full tw-text-gray-800 tw-text-sm tw-px-4 tw-py-3.5 tw-rounded-md focus:tw-bg-transparent tw-outline-blue-500 tw-transition-all" placeholder="Enter last name" />
        <div *ngIf="registroForm.get('Apellido')?.invalid && (registroForm.get('Apellido')?.touched || registroForm.get('Apellido')?.dirty)" class="tw-text-red-500 tw-text-sm">
          <div *ngIf="registroForm.get('Apellido')?.errors?.['required']">El apellido es obligatorio.</div>
          <div *ngIf="registroForm.get('Apellido')?.errors?.['minlength']">El apellido tiene que tener al menos 2 letras.</div>
        </div>
      </div>
      <div>
        <label for="Email" class="tw-text-gray-800 tw-text-sm tw-mb-2 tw-block">Correo</label>
        <input id="Email" name="Email" type="email" formControlName="Correo" class="tw-bg-gray-100 tw-w-full tw-text-gray-800 tw-text-sm tw-px-4 tw-py-3.5 tw-rounded-md focus:tw-bg-transparent tw-outline-blue-500 tw-transition-all" placeholder="Introduce tu correo" />
        <div *ngIf="registroForm.get('Correo')?.invalid && (registroForm.get('Correo')?.touched || registroForm.get('Correo')?.dirty)" class="tw-text-red-500 tw-text-sm">
          <div *ngIf="registroForm.get('Correo')?.errors?.['required']">El email es obligatorio.</div>
          <div *ngIf="registroForm.get('Correo')?.errors?.['email']">El formato del correo es invalido.</div>
        </div>
      </div>

      <div>
        <label for="password" class="tw-text-gray-800 tw-text-sm tw-mb-2 tw-block">Contraseña</label>
        <input id="password" name="password" type="password" formControlName="Contraseña" class="tw-bg-gray-100 tw-w-full tw-text-gray-800 tw-text-sm tw-px-4 tw-py-3.5 tw-rounded-md focus:tw-bg-transparent tw-outline-blue-500 tw-transition-all" placeholder="Introduce tu contraseña" />
        <div *ngIf="registroForm.get('Contraseña')?.invalid && (registroForm.get('Contraseña')?.touched || registroForm.get('Contraseña')?.dirty)" class="tw-text-red-500 tw-text-sm">
          <div *ngIf="registroForm.get('Contraseña')?.errors?.['required']">Password is required.</div>
          <div *ngIf="registroForm.get('Contraseña')?.errors?.['minlength']">Password must be at least 6 characters long.</div>
          <div *ngIf="registroForm.get('Contraseña')?.errors?.['passwordRequiresNonAlphanumeric']">Password must contain at least one non-alphanumeric character.</div>
          <div *ngIf="registroForm.get('Contraseña')?.errors?.['passwordRequiresLower']">Password must contain at least one lowercase letter.</div>
          <div *ngIf="registroForm.get('Contraseña')?.errors?.['passwordRequiresUpper']">Password must contain at least one uppercase letter.</div>
        </div>
      </div>

      <div>
        <label for="cpassword" class="tw-text-gray-800 tw-text-sm tw-mb-2 tw-block">Confirmar Contraseña</label>
        <input id="cpassword" name="cpassword" type="password" formControlName="Contraseña2" class="tw-bg-gray-100 tw-w-full tw-text-gray-800 tw-text-sm tw-px-4 tw-py-3.5 tw-rounded-md focus:tw-bg-transparent tw-outline-blue-500 tw-transition-all" placeholder="Confirma tu contraseña" />
        <div *ngIf="registroForm.errors?.['mismatch'] && (registroForm.get('Contraseña')?.touched || registroForm.get('Contraseña2')?.touched)" class="tw-text-red-500 tw-text-sm">
          Las contraseñas no coinciden
        </div>
      </div>

      <!-- Campos adicionales -->
      <div class="tw-relative tw-w-full tw-max-w-sm">
        <label for="pais" class="tw-text-gray-800 tw-text-sm tw-mb-2 tw-block">Pais</label>
        <input id="pais" name="pais" type="text" formControlName="PaisNombre" class="tw-bg-gray-100 tw-w-full tw-text-gray-800 tw-text-sm tw-px-4 tw-py-3.5 tw-rounded-md focus:tw-bg-transparent tw-outline-blue-500 tw-transition-all" placeholder="Introduce tu pais" (focus)="showDropdown()" (input)="filterPaises($event)" />
        <ul *ngIf="isDropdownVisible" id="dropdownMenu"
            class='tw-absolute tw-block tw-shadow-lg tw-bg-white tw-py-2 tw-px-2 tw-z-[1000] tw-min-w-full tw-w-max tw-rounded tw-max-h-96 tw-overflow-auto'>


          <li *ngFor="let pais of paisesFiltrado; let i = index" [attr.data-index]="i"
              class='tw-py-2.5 tw-px-4 hover:tw-bg-blue-50 tw-rounded tw-text-black tw-text-sm tw-cursor-pointer' (click)="selectPais(pais.nombre)">
            <div class="tw-flex tw-items-center" #paisItem>
              <img [src]="'assets/flags/' + pais.iso3Pais + '.png'" alt="{{ pais.nombre }}" class="tw-w-6 tw-mr-3" />
              {{ pais.nombre }}
            </div>
          </li>
        </ul>
      </div>


      <div class="tw-relative tw-w-full tw-max-w-sm">
        <label for="empleo" class="tw-text-gray-800 tw-text-sm tw-mb-2 tw-block">Empleo</label>
        <input id="empleo" name="empleo" type="text" formControlName="Empleo" class="tw-bg-gray-100 tw-w-full tw-text-gray-800 tw-text-sm tw-px-4 tw-py-3.5 tw-rounded-md focus:tw-bg-transparent tw-outline-blue-500 tw-transition-all" placeholder="Introduce tu ocupación" (focus)="showEmpleoDropdown()" (input)="filterEmpleos($event)" />
        <ul *ngIf="isEmpleoDropdownVisible" id="empleoDropdownMenu"
            class='tw-absolute tw-block tw-shadow-lg tw-bg-white tw-py-2 tw-px-2 tw-z-[1000] tw-min-w-full tw-w-max tw-rounded tw-max-h-96 tw-overflow-auto'>
          <li *ngFor="let empleo of empleosFiltrado; let i = index" [attr.data-index]="i"
              class='tw-py-2.5 tw-px-4 hover:tw-bg-blue-50 tw-rounded tw-text-black tw-text-sm tw-cursor-pointer' (click)="selectEmpleo(empleo)">
            <div class="tw-flex tw-items-center" #empleoItem>
              {{ empleo}}
            </div>
          </li>
        </ul>
      </div>

      <div>
        <label for="fecha" class="tw-text-gray-800 tw-text-sm tw-mb-2 tw-block">Fecha de nacimiento</label>
        <input id="fecha" name="fecha" type="date" formControlName="FechaNac" class="tw-bg-gray-100 tw-w-full tw-text-gray-800 tw-text-sm tw-px-4 tw-py-3.5 tw-rounded-md focus:tw-bg-transparent tw-outline-blue-500 tw-transition-all" placeholder="Enter date of birth" />
        <div *ngIf="registroForm.get('FechaNac')?.invalid && (registroForm.get('FechaNac')?.touched || registroForm.get('FechaNac')?.dirty)" class="tw-text-red-500 tw-text-sm">
          <div *ngIf="registroForm.get('FechaNac')?.errors?.['required']">Fecha de nacimiento es requerida.</div>
        </div>
      </div>
    </div>




    <input type="hidden" formControlName="Rol" value="Client">

    <div class="!tw-mt-12">
      <button type="submit" class="action-button">
        Registrarse
      </button>
    </div>
  </form>
</div>
